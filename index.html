<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>vue2 spa</title>
        <meta name="keywords" content=""/>
        <meta name="description" itemprop="description" content=""/>
        <meta name="viewport" content="initial-scale=1, maximum-scale=1"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <meta name="format-detection" content="email=no">
        <script>
            // if (navigator.serviceWorker) {
            //   navigator.serviceWorker.register('serviceWorker.js').then(function(registration) {
            //     console.log('service worker 注册成功');
            //     if (navigator.serviceWorker.controller) {
            //       navigator.serviceWorker.controller.postMessage({ title: 'Send message from client' });
            //     }
            //     // setInterval(function() {
            //     //   console.log('try update');
            //     //   registration.update();
            //     // }, 10000);
            //   }).catch(function(err) {
            //     console.log('servcie worker 注册失败')
            //   });
            //   navigator.serviceWorker.addEventListener('message', function (event) {
            //     console.log('from worker ' + event.data);
            //   });
            // }

            var worker = new Worker('worker.js');
            // worker.postMessage({ name: 'monkey' });
            //接收消息事件
            worker.onmessage = function(event) {
              console.log(event.data);
            };
            //错误信息事件
            worker.onerror = function(e) {
              console.log('erro: ' + e.message);
              //终止线程
              worker.terminate();
            };

            // function onMessage(e) {
            //   // 消息来源安全验证
            //   if (e.origin !="http://localhost") {
            //     return false;
            //   }
            //   // 消息处理...
            //   console.log(e.data);
            // }
            // window.addEventListener('message', onMessage, false);
        </script>
    </head>
    <body style="min-height: 100%;">
        <div id="app" style="min-height: 100%;">
        </div>
        <!-- built files will be auto injected -->
        <!-- 调用微信调用JS接口 -->
        <script src="//res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    </body>
</html>
